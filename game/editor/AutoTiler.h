#pragma once
#include <bitset>
#include <unordered_map>

#include "tileMap/TileMap.h"

class AutoTiler {
    bool &autoTiling;
    TileMap *tileMap;

    std::unordered_map<std::bitset<8>, int> tileMasks = {
        {std::bitset<8>("00000000"), 0},
        {std::bitset<8>("00001000"), 1},
        {std::bitset<8>("00011000"), 2},
        {std::bitset<8>("00010000"), 3},
        {std::bitset<8>("11011010"), 4},
        {std::bitset<8>("00011011"), 5},
        {std::bitset<8>("00011110"), 6},
        {std::bitset<8>("01111010"), 7},
        {std::bitset<8>("00001011"), 8},
        {std::bitset<8>("01011111"), 9},
        {std::bitset<8>("00011111"), 10},
        {std::bitset<8>("00010110"), 11},
        {std::bitset<8>("00000010"), 12},
        {std::bitset<8>("00001010"), 13},
        {std::bitset<8>("00011010"), 14},
        {std::bitset<8>("00010010"), 15},
        {std::bitset<8>("01001011"), 16},
        {std::bitset<8>("01111111"), 17},
        {std::bitset<8>("11011111"), 18},
        {std::bitset<8>("01010110"), 19},
        {std::bitset<8>("01101011"), 20},
        {std::bitset<8>("01111110"), 21},
        {std::bitset<8>("11011110"), 23},
        {std::bitset<8>("01000010"), 24},
        {std::bitset<8>("01001010"), 25},
        {std::bitset<8>("01011010"), 26},
        {std::bitset<8>("01010010"), 27},
        {std::bitset<8>("01101010"), 28},
        {std::bitset<8>("11111011"), 29},
        {std::bitset<8>("11111110"), 30},
        {std::bitset<8>("11010010"), 31},
        {std::bitset<8>("01111011"), 32},
        {std::bitset<8>("11111111"), 33},
        {std::bitset<8>("11011011"), 34},
        {std::bitset<8>("11010110"), 35},
        {std::bitset<8>("01000000"), 36},
        {std::bitset<8>("01001000"), 37},
        {std::bitset<8>("01011000"), 38},
        {std::bitset<8>("01010000"), 39},
        {std::bitset<8>("01011110"), 40},
        {std::bitset<8>("01111000"), 41},
        {std::bitset<8>("11011000"), 42},
        {std::bitset<8>("01011011"), 43},
        {std::bitset<8>("01101000"), 44},
        {std::bitset<8>("11111000"), 45},
        {std::bitset<8>("11111010"), 46},
        {std::bitset<8>("11010000"), 47},
        {std::bitset<8>("01100000"), 36},
        {std::bitset<8>("11110000"), 47},
        {std::bitset<8>("11000000"), 36},
        {std::bitset<8>("11100000"), 36},
        {std::bitset<8>("00001001"), 1},
        {std::bitset<8>("00010100"), 3},
        {std::bitset<8>("11101000"), 44},
        {std::bitset<8>("11111100"), 45},
        {std::bitset<8>("00011101"), 2},
        {std::bitset<8>("10010000"), 3},
        {std::bitset<8>("00101000"), 1},
        {std::bitset<8>("00000110"), 12},
        {std::bitset<8>("00000011"), 12},
        {std::bitset<8>("00000111"), 12},
        {std::bitset<8>("00101001"), 1},
        {std::bitset<8>("10010100"), 3},
        {std::bitset<8>("10010110"), 11},
        {std::bitset<8>("00010111"), 11},
        {std::bitset<8>("00011100"), 2},
        {std::bitset<8>("11111001"), 45},
        {std::bitset<8>("01000011"), 24},
        {std::bitset<8>("01100010"), 24},
        {std::bitset<8>("11000010"), 24},
        {std::bitset<8>("01000110"), 24},
        {std::bitset<8>("01100110"), 24},
        {std::bitset<8>("11000011"), 24},
        {std::bitset<8>("01100011"), 24},
        {std::bitset<8>("11000110"), 24},
        {std::bitset<8>("11100111"), 24},
        {std::bitset<8>("01100111"), 24},
        {std::bitset<8>("11100011"), 24},
        {std::bitset<8>("11100010"), 24},
        {std::bitset<8>("01000111"), 24},
        {std::bitset<8>("11010100"), 47},
        {std::bitset<8>("00101011"), 8},
        {std::bitset<8>("01101001"), 44},
        {std::bitset<8>("11010100"), 47},
        {std::bitset<8>("11110110"), 35},
        {std::bitset<8>("11110110"), 2},
        {std::bitset<8>("11101011"), 20},
        {std::bitset<8>("11010111"), 35},
        {std::bitset<8>("01101111"), 20},
        {std::bitset<8>("10011000"), 2},
        {std::bitset<8>("00111000"), 2},
        {std::bitset<8>("10111000"), 2},
        {std::bitset<8>("00001000"), 8},
        {std::bitset<8>("00011001"), 2},
        {std::bitset<8>("00001111"), 8},
        {std::bitset<8>("10011111"), 10},
        {std::bitset<8>("00111111"), 10},
        {std::bitset<8>("10111111"), 10},
        {std::bitset<8>("11111101"), 45},
        {std::bitset<8>("11110111"), 35},
        {std::bitset<8>("11101111"), 20},
        {std::bitset<8>("00010011"), 15},
        {std::bitset<8>("11001000"), 37},
        {std::bitset<8>("00001110"), 13},
        {std::bitset<8>("01110000"), 39},
        {std::bitset<8>("01001001"), 37},
        {std::bitset<8>("10010010"), 15},
        {std::bitset<8>("00101010"), 13},
        {std::bitset<8>("01010100"), 39},
        {std::bitset<8>("10011100"), 2},
        {std::bitset<8>("00111001"), 2},
        {std::bitset<8>("10111101"), 2},
        {std::bitset<8>("11100110"), 24},
        {std::bitset<8>("01110011"), 27},
        {std::bitset<8>("10011101"), 2},
        {std::bitset<8>("01011101"), 38},
        {std::bitset<8>("10111001"), 2},
        {std::bitset<8>("00111101"), 2},
        {std::bitset<8>("00001100"), 1},
        {std::bitset<8>("00001101"), 1},
        {std::bitset<8>("00010101"), 3},
        {std::bitset<8>("00100010"), 12},
        {std::bitset<8>("00100011"), 12},
        {std::bitset<8>("00100110"), 12},
        {std::bitset<8>("00100111"), 12},
        {std::bitset<8>("00101100"), 1},
        {std::bitset<8>("00101101"), 1},
        {std::bitset<8>("00101110"), 13},
        {std::bitset<8>("00110000"), 3},
        {std::bitset<8>("00110010"), 15},
        {std::bitset<8>("00110011"), 15},
        {std::bitset<8>("00110100"), 3},
        {std::bitset<8>("00110101"), 3},
        {std::bitset<8>("00110110"), 11},
        {std::bitset<8>("00110111"), 11},
        {std::bitset<8>("00111010"), 14},
        {std::bitset<8>("00111010"), 14},
        {std::bitset<8>("00010001"), 3},
        {std::bitset<8>("00101111"), 8},
        {std::bitset<8>("00110001"), 3},
        {std::bitset<8>("00111011"), 5},
        {std::bitset<8>("00111100"), 2},
        {std::bitset<8>("00111110"), 6},
        {std::bitset<8>("01000001"), 36},
        {std::bitset<8>("01000100"), 36},
        {std::bitset<8>("01000101"), 36},
        {std::bitset<8>("00101111"), 36},
        {std::bitset<8>("01001100"), 37},
        {std::bitset<8>("01001101"), 37},
        {std::bitset<8>("01001110"), 25},
        {std::bitset<8>("01010001"), 39},
        {std::bitset<8>("01010101"), 39},
        {std::bitset<8>("01010111"), 19},
        {std::bitset<8>("01011001"), 38},
        {std::bitset<8>("01011100"), 38},
        {std::bitset<8>("01100001"), 36},
        {std::bitset<8>("01100100"), 36},
        {std::bitset<8>("01100101"), 36},
        {std::bitset<8>("01101100"), 44},
        {std::bitset<8>("01101101"), 44},
        {std::bitset<8>("01110001"), 39},
        {std::bitset<8>("01110010"), 27},
        {std::bitset<8>("01110100"), 39},
        {std::bitset<8>("01110101"), 39},
        {std::bitset<8>("01110110"), 19},
        {std::bitset<8>("01110111"), 19},
        {std::bitset<8>("01111100"), 41},
        {std::bitset<8>("01111101"), 41},
        {std::bitset<8>("10000010"), 12},
        {std::bitset<8>("10000011"), 12},
        {std::bitset<8>("10000110"), 12},
        {std::bitset<8>("10000111"), 12},
        {std::bitset<8>("10001000"), 1},
        {std::bitset<8>("10001001"), 1},
        {std::bitset<8>("10001010"), 13},
        {std::bitset<8>("10001011"), 8},
        {std::bitset<8>("10001100"), 1},
        {std::bitset<8>("10001110"), 13},
        {std::bitset<8>("10001111"), 8},
        {std::bitset<8>("10010000"), 3},
        {std::bitset<8>("10010101"), 3},
        {std::bitset<8>("10011010"), 14},
        {std::bitset<8>("10011011"), 5},
        {std::bitset<8>("10011110"), 6},
        {std::bitset<8>("10100010"), 12},
        {std::bitset<8>("10100011"), 12},
        {std::bitset<8>("10100110"), 12},
        {std::bitset<8>("10100111"), 12},
        {std::bitset<8>("10101000"), 1},
        {std::bitset<8>("10101001"), 1},
        {std::bitset<8>("10101010"), 13},
        {std::bitset<8>("10101011"), 8},
        {std::bitset<8>("10101100"), 1},
        {std::bitset<8>("10101101"), 1},
        {std::bitset<8>("10101110"), 13},
        {std::bitset<8>("10101111"), 8},
        {std::bitset<8>("10110000"), 3},
        {std::bitset<8>("10110001"), 3},
        {std::bitset<8>("10110010"), 15},
        {std::bitset<8>("10110011"), 15},
        {std::bitset<8>("10110100"), 3},
        {std::bitset<8>("10110101"), 3},
        {std::bitset<8>("10110110"), 11},
        {std::bitset<8>("10110111"), 11},
        {std::bitset<8>("10111011"), 5},
        {std::bitset<8>("10111100"), 2},
        {std::bitset<8>("10111110"), 6},
        {std::bitset<8>("11000001"), 36},
        {std::bitset<8>("11000100"), 36},
        {std::bitset<8>("11000101"), 36},
        {std::bitset<8>("11000111"), 24},
        {std::bitset<8>("11001001"), 37},
        {std::bitset<8>("11001010"), 25},
        {std::bitset<8>("11001011"), 16},
        {std::bitset<8>("11001100"), 37},
        {std::bitset<8>("11001101"), 37},
        {std::bitset<8>("11001110"), 25},
        {std::bitset<8>("11001111"), 16},
        {std::bitset<8>("11010001"), 47},
        {std::bitset<8>("11010011"), 31},
        {std::bitset<8>("11010011"), 31},
        {std::bitset<8>("11010101"), 47},
        {std::bitset<8>("11011100"), 42},
        {std::bitset<8>("11011101"), 42},
        {std::bitset<8>("11100001"), 36},
        {std::bitset<8>("11100100"), 36},
        {std::bitset<8>("11101001"), 44},
        {std::bitset<8>("11101010"), 28},
        {std::bitset<8>("11110001"), 47},
        {std::bitset<8>("11110010"), 31},
        {std::bitset<8>("11110011"), 31},
        {std::bitset<8>("11110100"), 47},
        {std::bitset<8>("11110101"), 47},
        {std::bitset<8>("01001111"), 16},
        {std::bitset<8>("01010011"), 27},
        {std::bitset<8>("01101110"), 28},
        {std::bitset<8>("01111001"), 41},
        {std::bitset<8>("10001101"), 1},
        {std::bitset<8>("10010001"), 3},
        {std::bitset<8>("10010011"), 15},
        {std::bitset<8>("10010111"), 11},
        {std::bitset<8>("10011001"), 2},
        {std::bitset<8>("10111010"), 14},
        {std::bitset<8>("11011001"), 42},
        {std::bitset<8>("11100101"), 36},
        {std::bitset<8>("11101100"), 44},
        {std::bitset<8>("11101101"), 44},
        {std::bitset<8>("11101110"), 28},
    };

    void setNormalTile(float tileX, float tileY, int tileId, int layer) const;

    void setAutoTile(float tileX, float tileY, int tileId, int layer);

public:
    explicit AutoTiler(TileMap *tileMap, bool &autoTiling);

    void setTile(float tileX, float tileY, int tileId, int layer);
};

